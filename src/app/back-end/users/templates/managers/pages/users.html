{% extends "managers/base.html" %}
{% block content%}
<main class="main-content border-radius-lg">
  <div class="container-fluid2">
    <div class="black-box2 mt-4">
      <div class="search-container mt-4">
        <input type="text" class="search-bar" placeholder="Find something...">
        <button type="submit" class="search-button">Find</button>
      </div>
      {% for client in clients %}

      <div class="user-card">
        <div class="user-name-card">
          <div class="user-name">Editar</div>
        </div>
        <div class="user-info">

          <table>
            <td>{{ client.user.username }}</td>
            <td>{{ client.user.first_name }} {{ client.user.last_name }}</td>
            <td>{{ client.user.email }}</td>
            <td>{{ client.num_guest }}</td>
            <td>{{ client.user.last_login }}</td>
          </table>
        </div>
      </div>
      {% endfor %}


      <div class="user-card add-user-card">
        <div class="user-name-card">
          <div class="user-name add-account">+</div>
        </div>
      </div>
    </div>

    <div class="black-box mt-4 d-flex align-items-center justify-content-center flex-column">
      <form action="{% url "users:manager_users" %}" method="post" id="createform" style="display: none;">
        {% csrf_token %}
        {{ user_form.as_p}}
        <button class="btn btn-success btn-lg btn-block bg-gradient-primary mb-4" type="submit">Create User</button>
      </form>
      
      <form id="editform" style="display: none;">
        <input type="text" name="nombre_edit" placeholder="Nuevo Nombre">
        <input type="text" name="telefono_edit" placeholder="Nuevo Teléfono">
        <input type="email" name="email_edit" placeholder="Nuevo Email">
        <button class="btn btn-success btn-lg btn-block bg-gradient-primary mb-4">Save User</button>
        <button class="btn btn-success btn-lg btn-block bg-gradient-primary mb-4">Delete User</button>

      </form>

      <div id="confirmationModal" class="confirmation-modal">
        <div class="confirmation-content">
          <p>¿Are you sure about making these changes?</p>
          <button id="confirmYes">Yes</button>
          <button id="confirmNo">No</button>
        </div>
      </div>
    </div>

  </div>
</main>
{% endblock %}



<script>
  var userNameDiv = document.querySelector('.add-account')
  var createForm = document.getElementById('createform')
  var editForm = document.getElementById('editform')
  
 
  userNameDiv.addEventListener('click', function() {
    createForm.style.display = 'block'
    editForm.style.display = 'none' 
  })
  

  var editButton = document.querySelector('.user-name')
  editButton.addEventListener('click', function() {
    editForm.style.display = 'block'
    createForm.style.display = 'none' 
  })

  var saveButtons = document.querySelectorAll('form button')
  var confirmationModal = document.getElementById('confirmationModal')
  var confirmYesButton = document.getElementById('confirmYes')
  var confirmNoButton = document.getElementById('confirmNo')

   saveButtons.forEach(function(button) {
    button.addEventListener('click', function(event) {
      event.preventDefault()
      confirmationModal.style.display = 'block'
    })
  })

  confirmYesButton.addEventListener('click', function() {
    confirmationModal.style.display = 'none'
  })

  confirmNoButton.addEventListener('click', function() {
    confirmationModal.style.display = 'none'
  }) 
</script>

