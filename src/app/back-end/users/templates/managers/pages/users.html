{% extends "managers/base.html" %}
{% load static %}

{% block content %}
<div class="users-container">
    <table class="table table-striped table-dark">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Username</th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">Actions</th>
          <th scope="col">
            <a href="{% url 'users:manager_users_add' %}" class="btn btn-success btn-sm flex-row d-flex justify-content-center">
            <span class="material-icons ">
              add_circle_outline
              </span>
          </a>
        </th>
        </tr>
      </thead>
      <tbody>
        {% for client in page_obj %}
        <tr>
          <th scope="row">{{ client.id }}</th>
          <td>{{ client.user }}</td>
          <td>{{ client.fullname }}</td>
          <td>{{ client.user.email }}</td>
          <td>
            <a href="{% url 'users:manager_users_edit' client %}" class="btn btn-warning btn-sm mb-1 mb-lg-0">
              <span class="material-icons">
                edit
                </span>
            </a>
            <a href="{% url "users:manager_users_delete" client %}" class="btn btn-danger btn-sm mb-1 mb-lg-0" data-bs-toggle="modal" data-bs-target="#deleteModal{{ client }}">
              <span class="material-icons">
                delete
              </span>
            </a>
          </td>
          <td></td>
        </tr>
        {% include "users/messages/delete_user_modal.html" %}
        {% endfor %}
      </tbody>    
    </table>
</div>

{% include "managers/paginator.html" %}
  <script>
    document.addEventListener("DOMContentLoaded", (event) => {
      document
        .querySelector("#search-users-btn")
        .addEventListener("click", (event) => {
          event.preventDefault();
          const data = document.querySelector("#search-users-field").value;
          window.location.href = `/manager/users/search/${data}/`;
        });
    });
  </script>
{% endblock %}
